\documentclass{article}
\usepackage{geometry}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{courier}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}
\lstset{%
  backgroundcolor=\color{gray!20},
  breaklines=true,
  basicstyle=\small\ttfamily,
  keywordstyle=\small\ttfamily\bfseries,
  commentstyle=\ttfamily,
  frame=single, 
  language=Fortran,
  numbers=left,
  showspaces=false,
  showstringspaces=false
}
\lstdefinestyle{noumbers}
{numbers=none}
\usepackage{enumerate}

\title{CLAW language specification}
\author{Center for Climate System Modeling (C2SM)\\http://www.c2sm.ethz.ch\\Valentin Clement}
\date{April 26, 2016\\\vspace{1em}v0.2}

\setlength\parindent{0pt}
\setlength{\parskip}{1em}

\begin{document}
\maketitle


\tableofcontents

\section{General information about the CLAW language}
The directives are either local or global.

\begin{itemize}
\item Local directive: those directives have a limited impact on a local block of
code (for example, only in a subroutine or only in a do statement)
\item Global directive: those directives can have an impact on the whole
program.
\end{itemize}

The CLAW transformation are separated in the followings sections:
\begin{itemize}
\item CLAW abstraction transformation
\item Loop transformation
\item Accelerator abstractions/helpers transformation
\item Utility transformation
\end{itemize}

\subsection{Line continuation}
CLAW directives can be defined on several lines. The syntax is described as follows:

\begin{lstlisting}
!$claw directive clause &
!$claw clause
\end{lstlisting}


\subsection{Interpretation order of the CLAW directives}
The CLAW transformations can be combined together. For example, \lstinline!loop-fusion! and \lstinline!loop-interchange! can be used together in a group of nested loops.

The standard interpretation order of the directives is the following:

\begin{enumerate}
\item \lstinline!remove!
\item \lstinline!array-transform!
\item \lstinline!loop-extract!
\item \lstinline!loop-fusion!
\item \lstinline!loop-hoist!
\item \lstinline!loop-interchange!
\item \lstinline!call!
\item \lstinline!kcache!
\item formatting transformation (internal use transformation)
\end{enumerate}

Users must be aware that transformations are applied sequentially and
therefore, a transformation can be performed on code that is already transformed.

\input{claw_abstract_transformation.tex}
\input{claw_loop_transformation.tex}
\input{claw_acc_transformation.tex}
\input{claw_utility_transformation.tex}

\appendix
\input{code_examples.tex}

\end{document}
